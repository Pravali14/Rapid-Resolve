<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload & Explore Raw | Rapid Resolve</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .header {
            background-color: #004aad;
            color: white;
            padding: 15px;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }

        .upload-container {
            text-align: center;
            padding: 20px;
        }

        .upload-btn {
            background-color: #004aad;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
        }

        .upload-btn:hover {
            background-color: #003080;
        }

        .search-bar {
            margin: 20px auto;
            padding: 10px;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px;
        }

        .image-card {
            width: 200px;
            margin: 15px;
            padding: 10px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .image-card img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .image-card p {
            margin: 10px 0;
            font-size: 14px;
            color: #333;
        }
    </style>
</head>

<body>
    <div class="header">Upload & Explore Raw | Rapid Resolve</div>

    <div class="upload-container">
        <input type="file" id="fileInput" accept="image/*">
        <button class="upload-btn" onclick="uploadFile()">Upload & Secure Image</button>
    </div>

    <div class="upload-container">
        <input type="text" id="searchBar" class="search-bar" placeholder="Search by date or file name..." oninput="filterImages()">
    </div>

    <div class="gallery" id="imageGallery"></div>

    <script>
        let imageStorage = []; // Array to store uploaded images

        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput.files.length === 0) {
                alert('Please select a file to upload.');
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
                const encryptedData = encryptData(e.target.result); // Encrypt image data
                const wrappedData = wrapData(encryptedData, file.name); // Wrap it with security

                // Store wrapped data with file metadata
                imageStorage.push({
                    fileName: file.name,
                    uploadDate: new Date().toLocaleDateString(),
                    imageData: wrappedData,
                    rawData: e.target.result // For displaying after decryption
                });

                displayImages(); // Update gallery
                fileInput.value = ''; // Clear file input
            };

            reader.readAsDataURL(file);
        }

        function encryptData(data) {
            // Simple base64 encryption (for demonstration purposes)
            return btoa(data);
        }

        function wrapData(encryptedData, fileName) {
            // Create a wrapper (for demonstration, simply adding metadata)
            return JSON.stringify({
                fileName: fileName,
                encryptedData: encryptedData,
                security: 'outer-layer-secured'
            });
        }

        function displayImages() {
            const gallery = document.getElementById('imageGallery');
            gallery.innerHTML = ''; // Clear previous images

            imageStorage.forEach((item, index) => {
                const imageCard = document.createElement('div');
                imageCard.className = 'image-card';

                const img = document.createElement('img');
                img.src = item.rawData; // Use rawData (decrypted) for display

                const fileName = document.createElement('p');
                fileName.textContent = item.fileName;

                const uploadDate = document.createElement('p');
                uploadDate.textContent = `Uploaded on: ${item.uploadDate}`;

                imageCard.appendChild(img);
                imageCard.appendChild(fileName);
                imageCard.appendChild(uploadDate);

                gallery.appendChild(imageCard);
            });
        }

        function filterImages() {
            const query = document.getElementById('searchBar').value.toLowerCase();
            const filteredImages = imageStorage.filter(item =>
                item.fileName.toLowerCase().includes(query) ||
                item.uploadDate.toLowerCase().includes(query)
            );

            const gallery = document.getElementById('imageGallery');
            gallery.innerHTML = ''; // Clear previous images

            filteredImages.forEach((item, index) => {
                const imageCard = document.createElement('div');
                imageCard.className = 'image-card';

                const img = document.createElement('img');
                img.src = item.rawData; // Use rawData (decrypted) for display

                const fileName = document.createElement('p');
                fileName.textContent = item.fileName;

                const uploadDate = document.createElement('p');
                uploadDate.textContent = `Uploaded on: ${item.uploadDate}`;

                imageCard.appendChild(img);
                imageCard.appendChild(fileName);
                imageCard.appendChild(uploadDate);

                gallery.appendChild(imageCard);
            });
        }
    </script>
</body>

</html>
